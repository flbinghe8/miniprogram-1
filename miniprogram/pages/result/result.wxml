<!-- pages/result/result.wxml -->
<view class="container">
  <view class="header">
    <text class="title">{{pageTitle}}</text>
  </view>
  
  <view class="result-warning-box">
    <text class="warning-emoji">ğŸ¤–</text>
    <text class="warning-text">AIç”Ÿæˆå†…å®¹ï¼Œè¯·è°¨æ…å‚è€ƒ</text>
  </view>

  <!-- å¤šæ–¹æ¡ˆæ ‡ç­¾é¡µ -->
  <view class="tabs" wx:if="{{schemes.length > 1}}">
    <view 
      class="tab {{activeTab === index ? 'active' : ''}}" 
      wx:for="{{schemes}}" 
      wx:key="index"
      data-index="{{index}}"
      bindtap="onTabChange"
    >
      {{item.name}}
    </view>
  </view>

  <scroll-view scroll-y class="result-box">
    <view class="scheme-content">
      <view class="scheme-item" wx:for="{{schemes}}" wx:key="index" wx:if="{{activeTab === index}}">
        
        <!-- SEOæ ‡é¢˜æ–¹æ¡ˆ -->
        <view class="section" wx:if="{{item.title_zh}}">
          <view class="section-title">ä¸­æ–‡æ ‡é¢˜</view>
          <view class="section-content title-text">{{item.title_zh}}</view>
          <view class="copy-btn" data-content="{{item.title_zh}}" bindtap="copyContent">å¤åˆ¶</view>
        </view>

        <view class="section" wx:if="{{item.title_en}}">
          <view class="section-title">è‹±æ–‡æ ‡é¢˜</view>
          <view class="section-content title-text">{{item.title_en}}</view>
          <view class="copy-btn" data-content="{{item.title_en}}" bindtap="copyContent">å¤åˆ¶</view>
        </view>

        <!-- äº”ç‚¹æè¿° -->
        <view class="section" wx:if="{{item.bullet_points_zh && item.bullet_points_zh.length > 0}}">
          <view class="section-title">äº”ç‚¹æè¿°ï¼ˆä¸­æ–‡ï¼‰</view>
          <view class="bullet-points">
            <view class="bullet-item" wx:for="{{item.bullet_points_zh}}" wx:key="index">
              <text class="bullet-index">{{index + 1}}.</text>
              <text class="bullet-text">{{item}}</text>
              <view class="copy-btn-small" data-content="{{item}}" bindtap="copyContent">å¤åˆ¶</view>
            </view>
          </view>
          <view class="copy-btn" data-bullet-points="{{item.bullet_points_zh}}" bindtap="copyAllBulletPoints">å¤åˆ¶å…¨éƒ¨</view>
        </view>

        <view class="section" wx:if="{{item.bullet_points_en && item.bullet_points_en.length > 0}}">
          <view class="section-title">äº”ç‚¹æè¿°ï¼ˆè‹±æ–‡ï¼‰</view>
          <view class="bullet-points">
            <view class="bullet-item" wx:for="{{item.bullet_points_en}}" wx:key="index">
              <text class="bullet-index">{{index + 1}}.</text>
              <text class="bullet-text">{{item}}</text>
              <view class="copy-btn-small" data-content="{{item}}" bindtap="copyContent">å¤åˆ¶</view>
            </view>
          </view>
          <view class="copy-btn" data-bullet-points="{{item.bullet_points_en}}" bindtap="copyAllBulletPoints">å¤åˆ¶å…¨éƒ¨</view>
        </view>

        <!-- SOPå›¾ç‰‡å†…å®¹ -->
        <view class="section" wx:if="{{item.type === 'sop_images'}}">
          <view class="section-title">{{item.name}}</view>
          <view class="images-list">
            <view class="image-item" wx:for="{{item.images}}" wx:key="index">
              <view class="image-title">{{item.title}}</view>
              <view class="image-headline">{{item.headline}}</view>
              <view class="image-subtext">{{item.subtext}}</view>
              <view class="copy-btn" data-image="{{item}}" bindtap="copyImageContent">å¤åˆ¶å†…å®¹</view>
            </view>
          </view>
        </view>

        <!-- å¹¿å‘ŠæŠ¥å‘Šå†…å®¹ -->
        <view class="section" wx:if="{{item.type === 'ads_summary'}}">
          <view class="section-title">æ ¸å¿ƒä¸šç»©æ¦‚è§ˆ</view>
          <view class="ads-summary">
            <view class="summary-item" wx:for="{{item.summary}}" wx:key="key">
              <text class="summary-label">{{item.key}}</text>
              <text class="summary-value">{{item.value}}</text>
            </view>
          </view>
        </view>

        <view class="section" wx:if="{{item.type === 'ads_actions'}}">
          <view class="section-title">è¡ŒåŠ¨æ–¹æ¡ˆ</view>
          <view class="actions-list">
            <view class="action-item" wx:for="{{item.actions}}" wx:key="index">
              <view class="action-priority {{item.priority}}">{{item.priority}}ä¼˜å…ˆçº§</view>
              <view class="action-content">
                <text class="action-text">{{item.action}}</text>
                <text class="action-reason">{{item.reason}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- æ˜¾ç¤ºåŸå§‹å†…å®¹ï¼ˆå¦‚æœæ²¡æœ‰ç»“æ„åŒ–æ•°æ®ï¼‰ -->
        <view class="section" wx:if="{{item.content}}">
          <view class="section-title">ç”Ÿæˆå†…å®¹</view>
          <view class="section-content">{{item.content}}</view>
        </view>

      </view>
    </view>
  </scroll-view>
  
  <view class="actions">
    <button class="button-primary" bindtap="copyReport">ä¸€é”®å¤åˆ¶å…¨æ–‡</button>
    <button class="button-secondary" bindtap="editInput">è¿”å›ä¿®æ”¹</button>
  </view>
</view>